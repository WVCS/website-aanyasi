<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create an Activity</title>
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="createActivity.html">Create Activity</a></li>
            <li><a href="viewActivities.html">View Activities</a></li>
        </ul>
    </nav>

    <center>
        <h1>Create an Activity</h1>
        <p>Here, you can share an activity to be posted for others to see</p>
        <br><br>

        <form id="activityForm" enctype="multipart/form-data">
            <label for="userName">Your Name:</label>
            <input type="text" id="userName" name="userName" required><br><br>

            <label for="userEmail">Your Email:</label>
            <input type="email" id="userEmail" name="userEmail" required><br><br>

            <label for="nActivity">Name of Activity:</label>
            <input type="text" id="nActivity" name="nActivity" required><br><br>

            <label for="1date">When is it?</label>
            <input type="date" id="1date" name="1date" required><br><br>

            <label for="Ireccuring">Is this a recurring event?</label>
            <select name="Ireccuring" id="Ireccuring">
                <option value="no">No</option>
                <option value="weekly">Yes, weekly</option>
                <option value="monthly">Yes, monthly</option>
                <option value="yearly">Yes, yearly</option>
            </select><br><br>

            <label for="wLocation">Where is it? Enter an address</label>
            <input type="text" id="wLocation" name="wLocation" required><br><br>

            <label for="wProcess">What is the process to participate?</label>
            <input type="text" id="wProcess" name="wProcess" required><br><br>

            <label for="imageUpload">Upload an image:</label>
            <input type="file" id="imageUpload" name="imageUpload" accept="image/*"><br><br>

            <label for="states">What state is this in? Select a state</label>
            <select id="states" name="states" required>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <!-- Add other states here -->
                <option value="WY">Wyoming</option>
            </select><br><br>

            <input type="button" value="Next" onclick="submitForm()">
        </form>
    </center>

    <script>
        function submitForm() {
            const form = document.getElementById('activityForm');
            const formData = new FormData(form);

            const reader = new FileReader();
            const file = formData.get('imageUpload');
            
            reader.onload = function(event) {
                formData.append('imageDataURL', event.target.result);

                const activityData = {};
                formData.forEach((value, key) => {
                    activityData[key] = value;
                });

                localStorage.setItem('currentActivity', JSON.stringify(activityData));
                window.location.href = 'displayActivity.html';
            };

            if (file) {
                reader.readAsDataURL(file);
            } else {
                const activityData = {};
                formData.forEach((value, key) => {
                    activityData[key] = value;
                });

                localStorage.setItem('currentActivity', JSON.stringify(activityData));
                window.location.href = 'displayActivity.html';
            }
        }
    </script>
</body>
</html>
